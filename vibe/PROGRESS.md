# AI Novel Studio - å¼€å‘è¿›åº¦

> æœ€åæ›´æ–°: 2026-01-03

## æ•´ä½“è¿›åº¦

| é˜¶æ®µ | çŠ¶æ€ | å®Œæˆåº¦ |
|------|------|--------|
| é¡¹ç›®åˆå§‹åŒ– | âœ… å·²å®Œæˆ | 100% |
| æ•°æ®åº“ & è®¤è¯ | âœ… å·²å®Œæˆ | 100% |
| æ ¸å¿ƒ UI æ¡†æ¶ | âœ… å·²å®Œæˆ | 100% |
| æ–‡ä»¶æ ‘ (Binder) | âœ… å·²å®Œæˆ | 100% |
| ç¼–è¾‘å™¨ | âœ… å·²å®Œæˆ | 100% |
| å®ä½“ç®¡ç† | âœ… å·²å®Œæˆ | 100% |
| AI åŠŸèƒ½ | ğŸ”² æœªå¼€å§‹ | 0% |
| æ—¶é—´çº¿ | ğŸ”² æœªå¼€å§‹ | 0% |
| ä¼˜åŒ– & æ”¶å°¾ | ğŸ”² æœªå¼€å§‹ | 0% |

---

## Phase 1: é¡¹ç›®åˆå§‹åŒ–

### 1.1 ç¯å¢ƒæ­å»º
- [x] åˆ›å»º Next.js 15 é¡¹ç›® (App Router, TypeScript)
- [x] é…ç½® Tailwind CSS
- [x] å®‰è£…å¹¶é…ç½® Shadcn/ui
- [x] é…ç½® ESLint + Prettier
- [x] åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„ (`src/app`, `src/components`, `src/lib`, `src/types`)
- [x] é¦–æ¬¡éƒ¨ç½²åˆ° Vercel (å°½æ—©éªŒè¯éƒ¨ç½²æµç¨‹)

### 1.2 åŸºç¡€é…ç½®
- [x] é…ç½® Zustand store åŸºç¡€ç»“æ„
- [x] é…ç½® TanStack Query provider
- [x] é…ç½® Sonner (Toast)
- [x] é…ç½®å­—ä½“ (Inter, Noto Serif SC, JetBrains Mono)
- [x] é…ç½® Dark Mode (next-themes)

### 1.3 Supabase åˆå§‹åŒ–
- [x] åˆ›å»º Supabase é¡¹ç›® (éœ€ç”¨æˆ·åœ¨ Supabase Dashboard åˆ›å»º)
- [x] é…ç½®ç¯å¢ƒå˜é‡ (`.env.local`)
- [x] å®‰è£… Supabase JS Client
- [x] é…ç½® Drizzle ORM

---

## Phase 2: æ•°æ®åº“ & è®¤è¯

### 2.1 æ•°æ®åº“ Schema
- [x] åˆ›å»º `profiles` è¡¨ + RLS
- [x] åˆ›å»º `projects` è¡¨ + RLS
- [x] åˆ›å»º `nodes` è¡¨ + RLS
- [x] åˆ›å»º `entities` è¡¨ + RLS
- [x] åˆ›å»º `mentions` è¡¨ + RLS
- [x] åˆ›å»º `node_versions` è¡¨ + RLS
- [x] é…ç½®çº§è”åˆ é™¤çº¦æŸ
- [x] åˆ›å»º Drizzle schema æ–‡ä»¶

### 2.2 è®¤è¯ç³»ç»Ÿ
- [x] é…ç½® Supabase Auth
- [x] å®ç°ç™»å½•é¡µé¢ (`/login`)
- [x] å®ç°æ³¨å†Œé¡µé¢ (`/signup`)
- [x] å®ç° OAuth (GitHub, Google)
- [x] å®ç° Auth Middleware (ä¿æŠ¤è·¯ç”±)
- [x] å®ç°ç™»å‡ºåŠŸèƒ½
- [x] åˆ›å»º Profile è‡ªåŠ¨åˆ›å»º trigger

---

## Phase 3: æ ¸å¿ƒ UI æ¡†æ¶

### 3.1 å¸ƒå±€ç»„ä»¶
- [x] åˆ›å»º `AppShell` ä¸‰æ å¸ƒå±€ç»„ä»¶
- [x] åˆ›å»º `LeftSidebar` ç»„ä»¶ (å¯æŠ˜å )
- [x] åˆ›å»º `RightSidebar` ç»„ä»¶ (å¯æŠ˜å )
- [x] åˆ›å»º `MainContent` ç»„ä»¶
- [x] å®ç°å“åº”å¼æ–­ç‚¹é€»è¾‘
- [x] å®ç°ä¾§è¾¹æ æŠ˜å åŠ¨ç”»

### 3.2 Landing Page
- [x] åˆ›å»ºé¦–é¡µ (`/`)
- [x] Hero åŒºåŸŸ
- [x] åŠŸèƒ½ä»‹ç»
- [x] CTA æŒ‰é’®

### 3.3 é¡¹ç›®åˆ—è¡¨é¡µ
- [x] åˆ›å»ºé¡¹ç›®åˆ—è¡¨é¡µ (`/projects`)
- [x] é¡¹ç›®å¡ç‰‡ç»„ä»¶
- [x] åˆ›å»ºé¡¹ç›® Dialog
- [x] åˆ é™¤é¡¹ç›®ç¡®è®¤ Dialog
- [x] ç©ºçŠ¶æ€å±•ç¤º

---

## Phase 4: æ–‡ä»¶æ ‘ (Binder)

### 4.1 æ•°æ®å±‚
- [x] å®ç° `useNodes` hook (TanStack Query)
- [x] å®ç°èŠ‚ç‚¹ CRUD API routes
- [x] å®ç°ä¹è§‚æ›´æ–°é€»è¾‘
- [x] å®ç° fractional indexing æ’åº

### 4.2 UI ç»„ä»¶
- [x] åˆ›å»º `FileTree` ç»„ä»¶
- [x] åˆ›å»º `TreeNode` ç»„ä»¶ (FOLDER/FILE å›¾æ ‡)
- [x] å®ç° @dnd-kit æ‹–æ‹½æ’åº
- [x] å®ç°è·¨å±‚çº§æ‹–æ‹½
- [x] å®ç°å³é”®èœå• (æ–°å»º/é‡å‘½å/åˆ é™¤)
- [x] å®ç°å¿«æ·é”® (Ctrl+N, F2, Delete)
- [x] å®ç°èŠ‚ç‚¹å±•å¼€/æŠ˜å 

### 4.3 é¡¹ç›®ä»ªè¡¨ç›˜
- [x] åˆ›å»ºä»ªè¡¨ç›˜é¡µé¢ (`/editor/[id]`)
- [x] ç»Ÿè®¡å¡ç‰‡ (å­—æ•°/ç« èŠ‚/åœºæ™¯/å®ä½“)
- [x] æœ€è¿‘ç¼–è¾‘åˆ—è¡¨
- [x] å†™ä½œè¿›åº¦å±•ç¤º

---

## Phase 5: ç¼–è¾‘å™¨

### 5.1 Tiptap åŸºç¡€
- [x] å®‰è£… Tiptap åŠæ‰©å±•
- [x] åˆ›å»º `Editor` ç»„ä»¶
- [x] é…ç½®åŸºç¡€æ‰©å±• (Document, Paragraph, Text, History)
- [x] é…ç½® Markdown å¿«æ·é”®
- [x] å®ç°å†…å®¹è‡ªåŠ¨ä¿å­˜ (é˜²æŠ– 3s)
- [x] å®ç° `Ctrl+S` æ‰‹åŠ¨ä¿å­˜

### 5.2 FOLDER è§†å›¾
- [x] åˆ›å»ºå¤§çº²ç¼–è¾‘å™¨ (ç¼–è¾‘ `outline` å­—æ®µ)
- [x] åˆ›å»ºå­èŠ‚ç‚¹å¡ç‰‡åˆ—è¡¨
- [x] å®ç°å¡ç‰‡ç‚¹å‡»è·³è½¬

### 5.3 FILE è§†å›¾
- [x] åˆ›å»ºæ­£æ–‡ç¼–è¾‘å™¨
- [x] å®ç°å­—æ•°ç»Ÿè®¡
- [x] å®ç°åœºæ™¯å…ƒæ•°æ®ç¼–è¾‘ (timestamp, location, status)

### 5.4 ç‰ˆæœ¬å†å²
- [ ] å®ç°ç‰ˆæœ¬åˆ›å»ºé€»è¾‘ (5åˆ†é’Ÿé—´éš” + 200å­—ç¬¦å˜åŒ–)
- [ ] åˆ›å»ºç‰ˆæœ¬å†å²é¢æ¿
- [ ] å®ç°ç‰ˆæœ¬é¢„è§ˆ
- [ ] å®ç°ç‰ˆæœ¬æ¢å¤

---

## Phase 6: å®ä½“ç®¡ç†

### 6.1 æ•°æ®å±‚
- [x] å®ç° `useEntities` hook
- [x] å®ç°å®ä½“ CRUD API routes
- [x] å®ç° Mentions æ›´æ–°é€»è¾‘

### 6.2 Right Sidebar
- [x] åˆ›å»º `EntitySidebar` ç»„ä»¶
- [x] å®ç° Context Mode (å½“å‰åœºæ™¯å…³è”å®ä½“)
- [x] å®ç° Browse Mode (æŒ‰ç±»å‹åˆ†ç»„)
- [x] åˆ›å»ºå®ä½“å¡ç‰‡ç»„ä»¶
- [x] å®ç°å®ä½“è¯¦æƒ…å±•å¼€

### 6.3 å®ä½“ CRUD
- [x] åˆ›å»ºæ–°å®ä½“ Dialog
- [x] å®ç°å®ä½“ç¼–è¾‘ (å†…è”)
- [x] å®ç°å®ä½“åˆ é™¤
- [x] å®ç°åˆ«åç®¡ç†
- [x] å®ç°å±æ€§ (attributes) ç¼–è¾‘

### 6.4 å®ä½“é«˜äº®
- [x] å®ç° Aho-Corasick åŒ¹é… (Web Worker)
- [x] åˆ›å»º Tiptap é«˜äº®æ‰©å±•
- [x] å®ç° Hover å¡ç‰‡ (Tooltip)
- [x] å®ç°å³é”®"å¿½ç•¥æ­¤åŒ¹é…"
- [x] å­˜å‚¨ `ignored_entities` åˆ° metadata

---

## Phase 7: AI åŠŸèƒ½

### 7.1 åŸºç¡€è®¾æ–½
- [ ] é…ç½® Vercel AI SDK
- [ ] é…ç½® AI Provider (OpenAI/DeepSeek)
- [ ] åˆ›å»º Prompt æ¨¡æ¿æ–‡ä»¶
- [ ] å®ç°ä¸Šä¸‹æ–‡æ„å»ºå‡½æ•°

### 7.2 é€‰ä¸­æ–‡å­—èœå•
- [ ] åˆ›å»º Floating Menu ç»„ä»¶
- [ ] å®ç°æ¶¦è‰²åŠŸèƒ½ (`/api/ai/polish`)
- [ ] å®ç°æ‰©å†™åŠŸèƒ½ (`/api/ai/expand`)
- [ ] å®ç°ç¼©å†™åŠŸèƒ½ (`/api/ai/compress`)
- [ ] å®ç°ç¿»è¯‘åŠŸèƒ½ (`/api/ai/translate`)
- [ ] å®ç° Streaming æ˜¾ç¤º

### 7.3 AI å‘½ä»¤é¢æ¿
- [ ] åˆ›å»º Command Palette (`/` è§¦å‘)
- [ ] å®ç°è‡ªç”±å¯¹è¯ (`/api/ai/chat`)
- [ ] å®ç°ç”Ÿæˆåœºæ™¯ (`/api/ai/generate-scenes`)
- [ ] å®ç°ç”Ÿæˆæ‘˜è¦ (`/api/ai/summarize`)

### 7.4 Embedding (å¯é€‰ï¼ŒåæœŸ)
- [ ] å®ç° Embedding ç”Ÿæˆ
- [ ] å®ç° dirty æ ‡è®°é€»è¾‘
- [ ] å®ç°æ‰¹é‡æ›´æ–°

---

## Phase 8: æ—¶é—´çº¿

### 8.1 æ•°æ®å±‚
- [ ] å®ç°æ—¶é—´çº¿æŸ¥è¯¢ (å¸¦ timestamp çš„ FILE èŠ‚ç‚¹)

### 8.2 UI ç»„ä»¶
- [ ] åˆ›å»º `Timeline` ç»„ä»¶
- [ ] åˆ›å»ºæ—¶é—´çº¿èŠ‚ç‚¹å¡ç‰‡
- [ ] å®ç°ç‚¹å‡»è·³è½¬åˆ°åœºæ™¯
- [ ] å®ç°ç©ºçŠ¶æ€æç¤º

---

## Phase 9: ä¼˜åŒ– & æ”¶å°¾

### 9.1 ç¦»çº¿æ”¯æŒ
- [ ] é…ç½® idb-keyval
- [ ] å®ç°ç¦»çº¿é˜Ÿåˆ—
- [ ] å®ç°ç½‘ç»œæ¢å¤ååŒæ­¥
- [ ] å®ç°å¤šè®¾å¤‡å†²çªæ£€æµ‹

### 9.2 æ€§èƒ½ä¼˜åŒ–
- [ ] ç¼–è¾‘å™¨æ‡’åŠ è½½
- [ ] æ–‡ä»¶æ ‘è™šæ‹Ÿæ»šåŠ¨ (å¦‚èŠ‚ç‚¹è¿‡å¤š)
- [ ] å›¾ç‰‡æ‡’åŠ è½½

### 9.3 æœ€ç»ˆæµ‹è¯•
- [ ] å…¨æµç¨‹æ‰‹åŠ¨æµ‹è¯•
- [ ] ä¿®å¤å‘ç°çš„ Bug

---

## å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´å†…å®¹ |
|------|----------|
| 2026-01-03 | å®Œæˆ Phase 6.1-6.4 å®ä½“ç®¡ç†åŠŸèƒ½ |
| 2026-01-03 | å®Œæˆ Phase 5.1-5.3 ç¼–è¾‘å™¨åŠŸèƒ½ |
| 2026-01-03 | å®Œæˆ Phase 4.3 é¡¹ç›®ä»ªè¡¨ç›˜ |
| 2026-01-03 | å®Œæˆ Phase 4.2 æ–‡ä»¶æ ‘ UI ç»„ä»¶ |
| 2026-01-03 | å®Œæˆ Phase 4.1 èŠ‚ç‚¹æ•°æ®å±‚ |
| 2026-01-03 | ä»£ç é‡æ„ï¼šæŠ½å–å…¬å…±ç»„ä»¶å’Œå·¥å…·å‡½æ•° |
| 2026-01-03 | å®Œæˆ Phase 3.3 é¡¹ç›®åˆ—è¡¨é¡µ |
| 2026-01-03 | å®Œæˆ Phase 3.2 Landing Page |
| 2026-01-03 | å®Œæˆ Phase 3.1 å¸ƒå±€ç»„ä»¶ |
| 2026-01-03 | å®Œæˆ Phase 2.2 è®¤è¯ç³»ç»Ÿ |
| 2026-01-03 | å®Œæˆ Phase 2.1 æ•°æ®åº“ Schema |
| 2026-01-03 | å®Œæˆ Phase 1.3 Supabase åˆå§‹åŒ– |
| 2026-01-03 | å®Œæˆ Phase 1.2 åŸºç¡€é…ç½® |
| 2026-01-03 | å®Œæˆ Phase 1.1 ç¯å¢ƒæ­å»º |
| 2026-01-03 | åˆå§‹åŒ–è¿›åº¦æ–‡æ¡£ |
